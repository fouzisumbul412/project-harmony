import { Project, Note, FollowUp } from '@/types/project';

export let projects: Project[] = [
  {
    id: 'proj-1',
    projectName: 'Sukhada Wellness Portal',
    clientName: 'Sukhada Healthcare',
    developersAssigned: ['dev-1', 'dev-2'],
    framework: 'React + Node.js',
    startedOn: '2024-10-15',
    internalDeadline: '2025-01-15',
    actualCompletion: null,
    liveDate: null,
    projectStatus: 'In Progress',
    currentStage: 'Frontend Development',
    pendingFrom: 'Developer',
    delayReason: '',
    contentReceived: true,
    clientResponse: 'Active',
    lastFollowUpDate: '2025-01-28',
    finalApproval: false,
    paymentStatus: 'Partial',
    scopeChanges: 'Added wellness blog section',
    domain: 'sukhada.com',
    hosting: 'AWS',
    notes: [
      { id: 'n1', date: '2025-01-28', content: 'Client approved homepage design', by: 'Rahul Sharma' },
      { id: 'n2', date: '2025-01-25', content: 'Started integration with booking system', by: 'Priya Patel' },
    ],
    priority: 'High',
    projectType: 'Website',
    estimatedEffort: '320 hours',
    actualEffortSpent: '180 hours',
    clientContactPerson: 'Dr. Meera Joshi',
    clientContactEmail: 'meera@sukhada.com',
    clientContactPhone: '+91 98111 22333',
    totalProjectCost: 450000,
    warrantyEndDate: null,
    amcStatus: true,
    amcAmount: 36000,
    riskLevel: 'Low',
    importantLinks: [
      { label: 'Figma Design', url: 'https://figma.com/sukhada' },
      { label: 'GitHub Repo', url: 'https://github.com/outright/sukhada' },
    ],
    followUpHistory: [
      { id: 'f1', date: '2025-01-28', note: 'Discussed timeline adjustments', by: 'Admin' },
      { id: 'f2', date: '2025-01-20', note: 'Content review meeting', by: 'Rahul Sharma' },
    ],
  },
  {
    id: 'proj-2',
    projectName: 'Vsource Overseas CRM',
    clientName: 'Vsource Overseas Pvt Ltd',
    developersAssigned: ['dev-3', 'dev-4'],
    framework: 'React + Supabase',
    startedOn: '2024-11-01',
    internalDeadline: '2025-02-28',
    actualCompletion: null,
    liveDate: null,
    projectStatus: 'In Progress',
    currentStage: 'Backend Integration',
    pendingFrom: 'Client',
    delayReason: 'Waiting for API documentation from client',
    contentReceived: false,
    clientResponse: 'Delayed',
    lastFollowUpDate: '2025-01-27',
    finalApproval: false,
    paymentStatus: 'Pending',
    scopeChanges: '',
    domain: 'vsourceoverseas.com',
    hosting: 'Vercel + Supabase',
    notes: [
      { id: 'n3', date: '2025-01-27', content: 'Client hasn\'t shared employee data format yet', by: 'Amit Kumar' },
    ],
    priority: 'Urgent',
    projectType: 'CRM',
    estimatedEffort: '400 hours',
    actualEffortSpent: '220 hours',
    clientContactPerson: 'Rajesh Menon',
    clientContactEmail: 'rajesh@vsource.com',
    clientContactPhone: '+91 99887 66554',
    totalProjectCost: 580000,
    warrantyEndDate: null,
    amcStatus: false,
    amcAmount: 0,
    riskLevel: 'High',
    importantLinks: [
      { label: 'Figma Design', url: 'https://figma.com/vsource' },
      { label: 'Drive Folder', url: 'https://drive.google.com/vsource' },
    ],
    followUpHistory: [
      { id: 'f3', date: '2025-01-27', note: 'Sent reminder for API docs', by: 'Admin' },
      { id: 'f4', date: '2025-01-22', note: 'Demo call scheduled for next week', by: 'Sneha Reddy' },
    ],
  },
  {
    id: 'proj-3',
    projectName: 'RS Fisheries E-commerce',
    clientName: 'RS Fisheries',
    developersAssigned: ['dev-1', 'dev-5'],
    framework: 'Next.js + Stripe',
    startedOn: '2024-09-01',
    internalDeadline: '2024-12-15',
    actualCompletion: '2024-12-20',
    liveDate: '2025-01-05',
    projectStatus: 'Completed (Client Approved)',
    currentStage: 'Live & Maintenance',
    pendingFrom: 'Done',
    delayReason: 'Payment gateway integration took extra time',
    contentReceived: true,
    clientResponse: 'Satisfied',
    lastFollowUpDate: '2025-01-20',
    finalApproval: true,
    paymentStatus: 'Fully Paid',
    scopeChanges: 'Added bulk order feature',
    domain: 'rsfisheries.in',
    hosting: 'Vercel',
    notes: [
      { id: 'n4', date: '2025-01-20', content: 'Monthly performance review - 500+ orders processed', by: 'Rahul Sharma' },
    ],
    priority: 'Low',
    projectType: 'Ecommerce',
    estimatedEffort: '280 hours',
    actualEffortSpent: '310 hours',
    clientContactPerson: 'Suresh Kumar',
    clientContactEmail: 'suresh@rsfisheries.in',
    clientContactPhone: '+91 94433 22111',
    totalProjectCost: 380000,
    warrantyEndDate: '2025-06-05',
    amcStatus: true,
    amcAmount: 24000,
    riskLevel: 'Low',
    importantLinks: [
      { label: 'Live Site', url: 'https://rsfisheries.in' },
      { label: 'GitHub Repo', url: 'https://github.com/outright/rsfisheries' },
    ],
    followUpHistory: [
      { id: 'f5', date: '2025-01-20', note: 'AMC renewal discussion', by: 'Admin' },
    ],
  },
  {
    id: 'proj-4',
    projectName: 'Indo Vista Tourism',
    clientName: 'Indo Vista Travels',
    developersAssigned: ['dev-2', 'dev-6'],
    framework: 'React + Firebase',
    startedOn: '2024-12-01',
    internalDeadline: '2025-03-15',
    actualCompletion: null,
    liveDate: null,
    projectStatus: 'In Progress',
    currentStage: 'UI Development',
    pendingFrom: 'Developer',
    delayReason: '',
    contentReceived: true,
    clientResponse: 'Active',
    lastFollowUpDate: '2025-01-29',
    finalApproval: false,
    paymentStatus: 'Partial',
    scopeChanges: '',
    domain: 'indovistatours.com',
    hosting: 'Firebase Hosting',
    notes: [
      { id: 'n5', date: '2025-01-29', content: 'Tour packages section 80% complete', by: 'Priya Patel' },
    ],
    priority: 'Medium',
    projectType: 'Website',
    estimatedEffort: '200 hours',
    actualEffortSpent: '85 hours',
    clientContactPerson: 'Anita Desai',
    clientContactEmail: 'anita@indovista.com',
    clientContactPhone: '+91 98765 11223',
    totalProjectCost: 250000,
    warrantyEndDate: null,
    amcStatus: false,
    amcAmount: 0,
    riskLevel: 'Low',
    importantLinks: [
      { label: 'Figma Design', url: 'https://figma.com/indovista' },
    ],
    followUpHistory: [
      { id: 'f6', date: '2025-01-29', note: 'Weekly progress update shared', by: 'Ananya Gupta' },
    ],
  },
  {
    id: 'proj-5',
    projectName: 'Glownest Beauty Store',
    clientName: 'Glownest Cosmetics',
    developersAssigned: ['dev-4'],
    framework: 'Shopify + Custom Theme',
    startedOn: '2025-01-10',
    internalDeadline: '2025-02-20',
    actualCompletion: null,
    liveDate: null,
    projectStatus: 'In Progress',
    currentStage: 'Theme Customization',
    pendingFrom: 'Client',
    delayReason: 'Product images pending',
    contentReceived: false,
    clientResponse: 'Slow',
    lastFollowUpDate: '2025-01-28',
    finalApproval: false,
    paymentStatus: 'Pending',
    scopeChanges: '',
    domain: 'glownest.in',
    hosting: 'Shopify',
    notes: [
      { id: 'n6', date: '2025-01-28', content: 'Sent product image requirements again', by: 'Sneha Reddy' },
    ],
    priority: 'High',
    projectType: 'Ecommerce',
    estimatedEffort: '120 hours',
    actualEffortSpent: '45 hours',
    clientContactPerson: 'Kavitha Nair',
    clientContactEmail: 'kavitha@glownest.in',
    clientContactPhone: '+91 87654 33221',
    totalProjectCost: 180000,
    warrantyEndDate: null,
    amcStatus: false,
    amcAmount: 0,
    riskLevel: 'Medium',
    importantLinks: [
      { label: 'Shopify Admin', url: 'https://glownest.myshopify.com/admin' },
    ],
    followUpHistory: [
      { id: 'f7', date: '2025-01-28', note: 'Called client - will share images by weekend', by: 'Admin' },
    ],
  },
  {
    id: 'proj-6',
    projectName: 'Grano Foods Landing',
    clientName: 'Grano Organic Foods',
    developersAssigned: ['dev-3'],
    framework: 'HTML + Tailwind',
    startedOn: '2025-01-20',
    internalDeadline: '2025-02-05',
    actualCompletion: null,
    liveDate: null,
    projectStatus: 'In Progress',
    currentStage: 'Development',
    pendingFrom: 'Developer',
    delayReason: '',
    contentReceived: true,
    clientResponse: 'Active',
    lastFollowUpDate: '2025-01-25',
    finalApproval: false,
    paymentStatus: 'Partial',
    scopeChanges: '',
    domain: 'granofoods.com',
    hosting: 'Netlify',
    notes: [],
    priority: 'Medium',
    projectType: 'Landing',
    estimatedEffort: '40 hours',
    actualEffortSpent: '20 hours',
    clientContactPerson: 'Vikash Agarwal',
    clientContactEmail: 'vikash@grano.com',
    clientContactPhone: '+91 99001 12233',
    totalProjectCost: 45000,
    warrantyEndDate: null,
    amcStatus: false,
    amcAmount: 0,
    riskLevel: 'Low',
    importantLinks: [
      { label: 'Content Doc', url: 'https://docs.google.com/grano' },
    ],
    followUpHistory: [],
  },
  {
    id: 'proj-7',
    projectName: 'Elite Circle Members App',
    clientName: 'Elite Circle Club',
    developersAssigned: ['dev-1', 'dev-2', 'dev-4'],
    framework: 'React Native + Node.js',
    startedOn: '2024-08-01',
    internalDeadline: '2024-11-30',
    actualCompletion: '2024-12-15',
    liveDate: null,
    projectStatus: 'Completed (Dev)',
    currentStage: 'Client Review',
    pendingFrom: 'Client',
    delayReason: 'Client requested additional features mid-project',
    contentReceived: true,
    clientResponse: 'Reviewing',
    lastFollowUpDate: '2025-01-26',
    finalApproval: false,
    paymentStatus: 'Extra Pending',
    scopeChanges: 'Added event booking module, notification system',
    domain: 'elitecircle.app',
    hosting: 'AWS',
    notes: [
      { id: 'n7', date: '2025-01-26', content: 'Client testing app - feedback expected next week', by: 'Rahul Sharma' },
    ],
    priority: 'High',
    projectType: 'CRM',
    estimatedEffort: '600 hours',
    actualEffortSpent: '720 hours',
    clientContactPerson: 'Arjun Mehta',
    clientContactEmail: 'arjun@elitecircle.com',
    clientContactPhone: '+91 98765 99988',
    totalProjectCost: 850000,
    warrantyEndDate: null,
    amcStatus: true,
    amcAmount: 60000,
    riskLevel: 'Medium',
    importantLinks: [
      { label: 'GitHub Repo', url: 'https://github.com/outright/elitecircle' },
      { label: 'TestFlight', url: 'https://testflight.apple.com/elitecircle' },
    ],
    followUpHistory: [
      { id: 'f8', date: '2025-01-26', note: 'Reminder for approval sent', by: 'Admin' },
      { id: 'f9', date: '2025-01-19', note: 'Handed over testing credentials', by: 'Priya Patel' },
    ],
  },
  {
    id: 'proj-8',
    projectName: 'TravelBell Booking Platform',
    clientName: 'TravelBell Adventures',
    developersAssigned: ['dev-5', 'dev-6'],
    framework: 'Next.js + PostgreSQL',
    startedOn: '2024-11-15',
    internalDeadline: '2025-02-15',
    actualCompletion: null,
    liveDate: null,
    projectStatus: 'In Progress',
    currentStage: 'API Development',
    pendingFrom: 'Third Party',
    delayReason: 'Payment gateway approval pending',
    contentReceived: true,
    clientResponse: 'Active',
    lastFollowUpDate: '2025-01-29',
    finalApproval: false,
    paymentStatus: 'Partial',
    scopeChanges: 'Added multi-currency support',
    domain: 'travelbell.in',
    hosting: 'Vercel + Railway',
    notes: [
      { id: 'n8', date: '2025-01-29', content: 'Razorpay integration delayed - following up', by: 'Vikram Singh' },
    ],
    priority: 'Urgent',
    projectType: 'Ecommerce',
    estimatedEffort: '450 hours',
    actualEffortSpent: '280 hours',
    clientContactPerson: 'Deepak Sharma',
    clientContactEmail: 'deepak@travelbell.in',
    clientContactPhone: '+91 88776 55443',
    totalProjectCost: 620000,
    warrantyEndDate: null,
    amcStatus: true,
    amcAmount: 48000,
    riskLevel: 'High',
    importantLinks: [
      { label: 'Figma Design', url: 'https://figma.com/travelbell' },
      { label: 'Staging', url: 'https://staging.travelbell.in' },
    ],
    followUpHistory: [
      { id: 'f10', date: '2025-01-29', note: 'Called Razorpay support', by: 'Admin' },
    ],
  },
  {
    id: 'proj-9',
    projectName: 'Omega Fitness Dashboard',
    clientName: 'Omega Gym Chain',
    developersAssigned: ['dev-3', 'dev-6'],
    framework: 'React + Chart.js',
    startedOn: '2025-01-05',
    internalDeadline: '2025-03-01',
    actualCompletion: null,
    liveDate: null,
    projectStatus: 'In Progress',
    currentStage: 'Dashboard Design',
    pendingFrom: 'Developer',
    delayReason: '',
    contentReceived: true,
    clientResponse: 'Active',
    lastFollowUpDate: '2025-01-27',
    finalApproval: false,
    paymentStatus: 'Partial',
    scopeChanges: '',
    domain: 'omega.fit',
    hosting: 'Netlify',
    notes: [],
    priority: 'Medium',
    projectType: 'CRM',
    estimatedEffort: '280 hours',
    actualEffortSpent: '60 hours',
    clientContactPerson: 'Ravi Verma',
    clientContactEmail: 'ravi@omegafit.com',
    clientContactPhone: '+91 77665 44332',
    totalProjectCost: 320000,
    warrantyEndDate: null,
    amcStatus: false,
    amcAmount: 0,
    riskLevel: 'Low',
    importantLinks: [
      { label: 'Requirements Doc', url: 'https://docs.google.com/omega' },
    ],
    followUpHistory: [],
  },
  {
    id: 'proj-10',
    projectName: 'Luring Fashion Store',
    clientName: 'Luring Apparel',
    developersAssigned: ['dev-2'],
    framework: 'WooCommerce',
    startedOn: '2024-10-01',
    internalDeadline: '2024-12-01',
    actualCompletion: '2024-12-10',
    liveDate: '2024-12-15',
    projectStatus: 'Completed (Client Approved)',
    currentStage: 'Maintenance',
    pendingFrom: 'Done',
    delayReason: '',
    contentReceived: true,
    clientResponse: 'Happy',
    lastFollowUpDate: '2025-01-15',
    finalApproval: true,
    paymentStatus: 'Fully Paid',
    scopeChanges: '',
    domain: 'luringfashion.com',
    hosting: 'SiteGround',
    notes: [
      { id: 'n9', date: '2025-01-15', content: 'Client requested speed optimization', by: 'Priya Patel' },
    ],
    priority: 'Low',
    projectType: 'Ecommerce',
    estimatedEffort: '160 hours',
    actualEffortSpent: '170 hours',
    clientContactPerson: 'Nisha Kapoor',
    clientContactEmail: 'nisha@luring.com',
    clientContactPhone: '+91 99887 11223',
    totalProjectCost: 220000,
    warrantyEndDate: '2025-06-15',
    amcStatus: true,
    amcAmount: 18000,
    riskLevel: 'Low',
    importantLinks: [
      { label: 'Live Site', url: 'https://luringfashion.com' },
    ],
    followUpHistory: [],
  },
  {
    id: 'proj-11',
    projectName: 'CSK Sports Academy',
    clientName: 'CSK Academy',
    developersAssigned: ['dev-1', 'dev-3'],
    framework: 'React + Firebase',
    startedOn: '2024-12-15',
    internalDeadline: '2025-03-30',
    actualCompletion: null,
    liveDate: null,
    projectStatus: 'In Progress',
    currentStage: 'Requirements Finalization',
    pendingFrom: 'Client',
    delayReason: 'Scope not finalized',
    contentReceived: false,
    clientResponse: 'Slow',
    lastFollowUpDate: '2025-01-28',
    finalApproval: false,
    paymentStatus: 'Pending',
    scopeChanges: 'Multiple changes requested',
    domain: 'cskacademy.in',
    hosting: 'Firebase',
    notes: [
      { id: 'n10', date: '2025-01-28', content: 'Need final feature list from client', by: 'Amit Kumar' },
    ],
    priority: 'High',
    projectType: 'Website',
    estimatedEffort: '350 hours',
    actualEffortSpent: '40 hours',
    clientContactPerson: 'Dhoni Kumar',
    clientContactEmail: 'dhoni@cskacademy.in',
    clientContactPhone: '+91 98765 07007',
    totalProjectCost: 480000,
    warrantyEndDate: null,
    amcStatus: false,
    amcAmount: 0,
    riskLevel: 'High',
    importantLinks: [],
    followUpHistory: [
      { id: 'f11', date: '2025-01-28', note: 'Escalated to senior management', by: 'Admin' },
    ],
  },
  {
    id: 'proj-12',
    projectName: 'Author Publishing Portal',
    clientName: 'Author House India',
    developersAssigned: ['dev-4', 'dev-5'],
    framework: 'Laravel + Vue.js',
    startedOn: '2024-09-15',
    internalDeadline: '2025-01-15',
    actualCompletion: '2025-01-20',
    liveDate: null,
    projectStatus: 'Completed (Dev)',
    currentStage: 'UAT',
    pendingFrom: 'Client',
    delayReason: '',
    contentReceived: true,
    clientResponse: 'Testing',
    lastFollowUpDate: '2025-01-29',
    finalApproval: false,
    paymentStatus: 'Partial',
    scopeChanges: 'Added author royalty tracking',
    domain: 'authorhouse.in',
    hosting: 'DigitalOcean',
    notes: [
      { id: 'n11', date: '2025-01-29', content: 'UAT feedback received - minor fixes needed', by: 'Sneha Reddy' },
    ],
    priority: 'Medium',
    projectType: 'CRM',
    estimatedEffort: '380 hours',
    actualEffortSpent: '400 hours',
    clientContactPerson: 'Amit Saxena',
    clientContactEmail: 'amit@authorhouse.in',
    clientContactPhone: '+91 88999 77666',
    totalProjectCost: 520000,
    warrantyEndDate: null,
    amcStatus: true,
    amcAmount: 42000,
    riskLevel: 'Low',
    importantLinks: [
      { label: 'Staging', url: 'https://staging.authorhouse.in' },
      { label: 'GitHub', url: 'https://github.com/outright/authorhouse' },
    ],
    followUpHistory: [
      { id: 'f12', date: '2025-01-29', note: 'Shared UAT credentials', by: 'Vikram Singh' },
    ],
  },
];

let projectCounter = projects.length;

export const getProjectById = (id: string): Project | undefined => {
  return projects.find((project) => project.id === id);
};

export const getProjectsByDeveloper = (developerId: string): Project[] => {
  return projects.filter((project) => 
    project.developersAssigned.includes(developerId)
  );
};

export const addProject = (projectData: Omit<Project, 'id'>): Project => {
  projectCounter++;
  const newProject: Project = {
    ...projectData,
    id: `proj-${projectCounter}`,
  };
  projects = [...projects, newProject];
  return newProject;
};

export const updateProject = (id: string, updates: Partial<Project>): Project | null => {
  const index = projects.findIndex((p) => p.id === id);
  if (index === -1) return null;
  
  projects[index] = { ...projects[index], ...updates };
  return projects[index];
};

export const deleteProject = (id: string): boolean => {
  const originalLength = projects.length;
  projects = projects.filter((p) => p.id !== id);
  return projects.length < originalLength;
};

export const addNoteToProject = (projectId: string, note: Omit<Note, 'id'>): Note | null => {
  const project = getProjectById(projectId);
  if (!project) return null;
  
  const newNote: Note = {
    ...note,
    id: `n-${Date.now()}`,
  };
  project.notes = [newNote, ...project.notes];
  return newNote;
};

export const addFollowUpToProject = (projectId: string, followUp: Omit<FollowUp, 'id'>): FollowUp | null => {
  const project = getProjectById(projectId);
  if (!project) return null;
  
  const newFollowUp: FollowUp = {
    ...followUp,
    id: `f-${Date.now()}`,
  };
  project.followUpHistory = [newFollowUp, ...project.followUpHistory];
  return newFollowUp;
};
